/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package vue;

import bean.CodeBarreForm;
//import bean.FactureForm;
//import bean.FactureLigneForm;
import bean.Form;
import bean.ProduitForm;
import bean.PersonneForm;
import controleur.Controleur;
import controleur.DonneeInvalideException;
import java.awt.Color;
import java.util.Vector;

/**
 *
 * @author Home
 */
public class critVente extends javax.swing.JPanel {

    private Controleur controleur;
    private Chercheur parent;
    
//    private FactureLigneForm ligneFacture; //si une ligne est en train d'être modifiée
    private ProduitForm produitExamine;
    
    /**
     * Creates new form critPersonne
     */
    public critVente(Controleur controleur, Chercheur parent)
    {
        this.controleur = controleur;
        this.parent = parent;
        initComponents();
        clean();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        labelCodeBarre = new javax.swing.JLabel();
        labelQuantite = new javax.swing.JLabel();
        fieldQuantite = new javax.swing.JSpinner();
        labelNom = new javax.swing.JLabel();
        labelDevFab = new javax.swing.JLabel();
        labelZone = new javax.swing.JLabel();
        labelEdition = new javax.swing.JLabel();
        labelPlateforme = new javax.swing.JLabel();
        labelPrix = new javax.swing.JLabel();
        labelStock = new javax.swing.JLabel();
        buttonChercher = new javax.swing.JButton();
        buttonAjouter = new javax.swing.JButton();
        buttonSupprimer = new javax.swing.JButton();
        buttonTerminer = new javax.swing.JButton();
        fieldCodeBarre = new javax.swing.JFormattedTextField();
        fieldNom = new javax.swing.JTextField();
        fieldEditeur = new javax.swing.JTextField();
        listeZone = new javax.swing.JComboBox<>();
        fieldEdition = new javax.swing.JTextField();
        listePlateforme = new javax.swing.JComboBox<>();
        fieldPrix = new javax.swing.JFormattedTextField();
        fieldStock = new javax.swing.JFormattedTextField();

        labelCodeBarre.setText("Code Barre : ");

        labelQuantite.setText("Quantité :");
        labelQuantite.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        fieldQuantite.setModel(new javax.swing.SpinnerNumberModel(0, 0, null, 1));

        labelNom.setText("Nom : ");
        labelNom.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        labelDevFab.setText("Fabricant : ");

        labelZone.setText("Zone : ");

        labelEdition.setText("Edition : ");

        labelPlateforme.setText("Plateforme : ");

        labelPrix.setText("Prix :");

        labelStock.setText("Stock :");

        buttonChercher.setText("Chercher");
        buttonChercher.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonChercherActionPerformed(evt);
            }
        });

        buttonAjouter.setText("Ajouter");
        buttonAjouter.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonAjouterActionPerformed(evt);
            }
        });

        buttonSupprimer.setText("Supprimer");
        buttonSupprimer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonSupprimerActionPerformed(evt);
            }
        });

        buttonTerminer.setText("Terminer");
        buttonTerminer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonTerminerActionPerformed(evt);
            }
        });

        fieldCodeBarre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldCodeBarreActionPerformed(evt);
            }
        });

        fieldNom.setToolTipText("Nom");
        fieldNom.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                fieldNomKeyPressed(evt);
            }
        });

        fieldEditeur.setToolTipText("Developpeur / Fabricant");
        fieldEditeur.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldEditeurActionPerformed(evt);
            }
        });

        listeZone.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                listeZoneItemStateChanged(evt);
            }
        });

        fieldEdition.setToolTipText("Edition");

        listePlateforme.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "PC", "PS", " " }));
        listePlateforme.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                listePlateformeItemStateChanged(evt);
            }
        });
        listePlateforme.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                listePlateformeActionPerformed(evt);
            }
        });

        fieldPrix.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldPrixActionPerformed(evt);
            }
        });

        fieldStock.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fieldStockActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(buttonAjouter)
                        .addGap(18, 18, 18)
                        .addComponent(buttonSupprimer)
                        .addGap(41, 41, 41)
                        .addComponent(buttonTerminer))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(labelCodeBarre)
                            .addComponent(labelNom))
                        .addGap(35, 35, 35)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(fieldCodeBarre, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(28, 28, 28)
                                .addComponent(buttonChercher))
                            .addComponent(fieldNom, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(labelQuantite)
                                .addGap(18, 18, 18)
                                .addComponent(fieldQuantite, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(labelStock))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(fieldStock, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                            .addComponent(labelEdition)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(fieldEdition, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                            .addComponent(labelZone)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(listeZone, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                            .addComponent(labelDevFab)
                            .addGap(49, 49, 49)
                            .addComponent(fieldEditeur, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(layout.createSequentialGroup()
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(labelPlateforme, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                    .addComponent(labelPrix)
                                    .addGap(91, 91, 91)))
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(fieldPrix, javax.swing.GroupLayout.PREFERRED_SIZE, 136, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(listePlateforme, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addContainerGap(551, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelCodeBarre, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(buttonChercher)
                    .addComponent(fieldCodeBarre, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(fieldNom, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(labelNom, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(labelDevFab)
                        .addGap(12, 12, 12))
                    .addGroup(layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(fieldEditeur, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 14, Short.MAX_VALUE)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelZone)
                    .addComponent(listeZone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(6, 6, 6)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelEdition)
                    .addComponent(fieldEdition, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(6, 6, 6)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelPlateforme)
                    .addComponent(listePlateforme, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(11, 11, 11)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(labelPrix)
                    .addComponent(fieldPrix, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(labelStock)
                        .addGap(8, 8, 8)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(labelQuantite, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(fieldQuantite, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addComponent(fieldStock, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(buttonAjouter)
                    .addComponent(buttonSupprimer)
                    .addComponent(buttonTerminer))
                .addGap(12, 12, 12))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void buttonChercherActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonChercherActionPerformed
        this.parent.lancerRecherche(new CodeBarreForm(this.fieldCodeBarre.getText()));
        buttonChercher.setBackground(Color.GREEN);
    }//GEN-LAST:event_buttonChercherActionPerformed

    private void buttonAjouterActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonAjouterActionPerformed
        // TODO add your handling code here:
        buttonAjouter.setBackground(Color.GREEN);
    }//GEN-LAST:event_buttonAjouterActionPerformed

    private void buttonSupprimerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonSupprimerActionPerformed
        // TODO add your handling code here:
         buttonSupprimer.setBackground(Color.GREEN);
    }//GEN-LAST:event_buttonSupprimerActionPerformed

    private void buttonTerminerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonTerminerActionPerformed
        // TODO add your handling code here:
         buttonTerminer.setBackground(Color.GREEN);
         
    }//GEN-LAST:event_buttonTerminerActionPerformed

    private void fieldCodeBarreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldCodeBarreActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldCodeBarreActionPerformed

    private void fieldNomKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fieldNomKeyPressed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldNomKeyPressed

    private void fieldEditeurActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldEditeurActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldEditeurActionPerformed

    private void listeZoneItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_listeZoneItemStateChanged
        // TODO add your handling code here:
        if ("Autre".equals((String)listeZone.getSelectedItem()))
        {
            // fieldTxtAjoutZone.setVisible(true);
            // buttonAjoutZone.setVisible(true);
        }
        else
        {
            // fieldTxtAjoutZone.setVisible(false);
            // buttonAjoutZone.setVisible(false);
        }
    }//GEN-LAST:event_listeZoneItemStateChanged

    private void fieldStockActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldStockActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldStockActionPerformed

    private void listePlateformeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_listePlateformeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_listePlateformeActionPerformed

    private void listePlateformeItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_listePlateformeItemStateChanged
        // TODO add your handling code here:
    }//GEN-LAST:event_listePlateformeItemStateChanged

    private void fieldPrixActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fieldPrixActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_fieldPrixActionPerformed

    
    public void clean()
    {
        //this.ligneFacture = null;
        this.labelDevFab.setVisible(false);
        this.labelNom.setVisible(false);
        this.labelPlateforme.setVisible(false);
        this.labelEdition.setVisible(false);
        this.labelZone.setVisible(false);
        this.labelPrix.setVisible(false);
        this.labelStock.setVisible(false);
    }
    public void setForm(Form f)
    {
        boolean typeJeu;
        String typeDev;
        
        if (f instanceof ProduitForm) {
            //this.ligneFacture = null;
            this.produitExamine = (ProduitForm) f;
            
        }
//        else if (f instanceof FactureLigneForm) {
//            this.ligneFacture = (FactureLigneForm) f;
//            this.produitExamine = this.ligneFacture.getProduit();
//        }
        else
            throw new IllegalArgumentException("Erreur dans menuProduit: le formulaire à sélectionner n'est pas un ProduitForm ou un FactureLigneForm.");
        
            typeJeu = ("Jeu".equals(this.produitExamine.getType()));
            if (typeJeu) {
                typeDev = "Développeur : ";
                this.labelPlateforme.setText("Plateforme : " + this.produitExamine.getPlateforme());
            }
            else
                typeDev = "Fabricant : ";
            this.labelDevFab.setText(typeDev + this.produitExamine.getEditeur());
            this.labelNom.setText("Nom : " + this.produitExamine.getNom());
            this.labelEdition.setText("Edition : " + this.produitExamine.getEdition());
            this.labelZone.setText("Zone : " + this.produitExamine.getZone());
            this.labelPrix.setText("Prix : " + this.produitExamine.getPrix() + " €");
            this.labelStock.setText("Stock : " + this.produitExamine.getStock());
            
            this.labelDevFab.setVisible(true);
            this.labelNom.setVisible(true);
            this.labelPlateforme.setVisible(typeJeu);
            this.labelEdition.setVisible(true);
            this.labelZone.setVisible(true);
            this.labelPrix.setVisible(true);
            this.labelStock.setVisible(true);
    }
/*    private FactureForm toForm()
    {
        FactureForm retour = new FactureForm();
        retour.setNature(true);
        retour.setLignes(this.parent.getLignesFacture());
        
        //TODO: setIdClient !
        
        return retour;
    }*/

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton buttonAjouter;
    private javax.swing.JButton buttonChercher;
    private javax.swing.JButton buttonSupprimer;
    private javax.swing.JButton buttonTerminer;
    private javax.swing.JFormattedTextField fieldCodeBarre;
    private javax.swing.JTextField fieldEditeur;
    private javax.swing.JTextField fieldEdition;
    private javax.swing.JTextField fieldNom;
    private javax.swing.JFormattedTextField fieldPrix;
    private javax.swing.JSpinner fieldQuantite;
    private javax.swing.JFormattedTextField fieldStock;
    private javax.swing.JLabel labelCodeBarre;
    private javax.swing.JLabel labelDevFab;
    private javax.swing.JLabel labelEdition;
    private javax.swing.JLabel labelNom;
    private javax.swing.JLabel labelPlateforme;
    private javax.swing.JLabel labelPrix;
    private javax.swing.JLabel labelQuantite;
    private javax.swing.JLabel labelStock;
    private javax.swing.JLabel labelZone;
    private javax.swing.JComboBox<String> listePlateforme;
    private javax.swing.JComboBox<String> listeZone;
    // End of variables declaration//GEN-END:variables
}
